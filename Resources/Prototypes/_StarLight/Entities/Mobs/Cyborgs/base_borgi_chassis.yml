- type: entity
  parent: MobCorgiSmart
  id: BaseBorgiChassis
  save: false
  abstract: true
  components:
    - type: RandomMetadata
      nameSegments:
      - NamesBorgi
    - type: ShowJobIcons
    - type: DamageOnHighSpeedImpact
      soundHit:
        collection: MetalThud
    - type: Instrument # All borgi have an instrument, however only a few can access it
      allowPercussion: false
      handheld: false
      bank: 0
      program: 33
    - type: Sprite
      drawdepth: Mobs
      sprite: Mobs/Pets/corgi.rsi
      layers:
      # Additional layers required for borg states
      - map: ["enum.DamageStateVisualLayers.Base"]
        state: corgi
      - map: [ "enum.HumanoidVisualLayers.Handcuffs" ]
        color: "#ffffff"
        sprite: Objects/Misc/handcuffs.rsi # Would do a custom dog handcuff sprite but unfortunately handcuffs have their overlay baked-in to the cuff itself so this is mostly filler
        state: body-overlay-2
        visible: false
      - map: ["enum.BorgVisualLayers.Body"]
        state: corgi
        visible: false
      - state: corgitag
        map: ["enum.BorgVisualLayers.Light"]
        shader: unshaded
        visible: false
      - state: corgitag
        map: ["enum.BorgVisualLayers.LightStatus"]
        shader: unshaded
        visible: false
    - type: MobThresholds
      showOverlays: false
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 75
        behaviors:
        - !type:PlaySoundBehavior
          sound:
            path: /Audio/Machines/warning_buzzer.ogg
            params:
              volume: 5
      - trigger:
          !type:DamageTrigger
          damage: 300
        behaviors:
        - !type:PlaySoundBehavior
          sound:
            collection: MetalBreak
        - !type:EmptyContainersBehaviour
          containers:
          - borg_brain
          - borg_module
          - cell_slot
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: HealthExaminable
      examinableTypes:
      - Blunt
      - Slash
      - Piercing
      - Heat
      - Shock
      locPrefix: silicon
    - type: UserInterface
      interfaces:
      # Borg UIs
        enum.SiliconLawsUiKey.Key:
          type: SiliconLawBoundUserInterface
          requireInputValidation: false
        enum.BorgUiKey.Key:
          type: BorgBoundUserInterface
        enum.StrippingUiKey.Key:
          type: StrippableBoundUserInterface
        enum.StorageUiKey.Key:
          type: StorageBoundUserInterface
        enum.InstrumentUiKey.Key:
          type: InstrumentBoundUserInterface
          requireInputValidation: false
    - type: Tag
      tags:
      - VimPilot
      - CanPilot
      - AnomalyHost
      - DoorBumpOpener
    - type: ActivatableUI
      key: enum.BorgUiKey.Key
    - type: SiliconLawBound
    - type: SiliconLawProvider
      laws: BorgiLawset
    - type: ActionGrant
      actions:
      - ActionViewLaws
    - type: BorgChassis
      maxModules: 4
      moduleWhitelist:
        tags:
        - BorgModuleGeneric
        - BorgModuleCargo
        - BorgModuleMedical
        - BorgModuleSyndicate # allow installing a Esword into borgis.
      hasMindState: corgitag
      noMindState: corgitag
    - type: LockingWhitelist
      blacklist:
        components:
        - BorgChassis
        - RoboticsConsole
    - type: WiresPanel
    - type: ActivatableUIRequiresPanel
    - type: NameIdentifier
      group: Silicon
    - type: PowerCellSlot
      cellSlotId: cell_slot
      fitsInCharger: true
    - type: ItemToggle
      onActivate: false
      activated: false
      onUse: false
    - type: AccessToggle
    - type: PowerCellDraw
      drawRate: 0.3
    - type: ItemSlots
      slots:
        cell_slot:
          name: power-cell-slot-component-slot-name-default
    - type: StatusEffects
      allowed:
      - Stun
      - KnockedDown
      - SlowedDown
      - Flashed
    - type: TypingIndicator
      proto: robot
    - type: DamagedSiliconAccent
    - type: UnblockableSpeech
    - type: Construction
      graph: Cyborg
      node: cyborg
      containers:
      - cell_slot
    - type: Lock
      locked: true
      unlockOnClick: false
    - type: UIRequiresLock
      userInterfaceKeys:
      - enum.BorgUiKey.Key
    - type: LockedWiresPanel
    - type: Pullable
    - type: StandingState
    - type: Emoting
    - type: GuideHelp
      guides:
      - Cyborgs
    # Borgis by-and-large can't wear all space suits so this helps mitigate that trouble somewhat where needed
    - type: Barotrauma
      maxDamage: 25
      damage:
        types:
          Blunt: 0.15
    - type: Temperature
      coldDamage:
        types:
          Cold: 0.03
    - type: IntrinsicRadioReceiver
    - type: IntrinsicRadioTransmitter
      channels:
      - Binary
    - type: ActiveRadio
      channels:
      - Binary
    - type: CyborgSparkEffect
    - type: StationAIShunt
    - type: LanguageKnowledge
      speaks:
      - GalacticCommon
      - Machine
      - Dog
      understands:
      - GalacticCommon
      - SolCommon
      - Machine
      - Canilunzt
      - Sign
      - Bubblish
      - Chittin
      - Draconic
      - Marish
      - Moffic
      - Nekomimetic
      - Sylvan
      - Terrum
      - VoxPidgin
      - Scratch
      - Dog
      - Thaveyan

- type: entity
  parent: [ BaseBorgiChassis, BaseBorgTransponder ]
  id: BaseStationBorgiChassis
  name: Smart Borgi
  description: A unusually smart dog, loves stating it's laws.
  save: false
  abstract: true
  components:
    - type: AccessReader
      access: [["Command"], ["Research"]]
    - type: EmagSiliconLaw
      stunTime: 5
    - type: BorgTransponder
      sprite:
        sprite: Mobs/Pets/corgi.rsi
        state: corgi
      name: borgi
    - type: DeviceNetwork
      deviceNetId: Wireless
      receiveFrequencyId: CyborgControl
      transmitFrequencyId: RoboticsConsole
      savableAddress: false
    - type: TimerTrigger
      delay: 10
      examinable: false
      beepSound:
        path: /Audio/Effects/Cargo/buzz_two.ogg
        params:
          volume: -4
    - type: ExplodeOnTrigger
      keysIn:
      - timer
    - type: Explosive
      explosionType: Minibomb
      deleteAfterExplosion: false # let damage threshold gib the borgi
      totalIntensity: 200
      intensitySlope: 100
      maxIntensity: 60
      canCreateVacuum: false # its for killing the borg not the station
    - type: IonStormTarget
    - type: Access
      enabled: false
      tags:
      - Borg

#region Syndicate Borgi

- type: entity
  parent: BaseBorgiChassis
  id: BaseSyndicateBorgiChassis
  name: Syndi Borgi
  description: An unusually smart dog, but hell bent on MURDER.
  suffix: Antag
  components:
    - type: GhostRole
      name: A Syndicate Borgi.
      description: The Syndicate needs reinforcements. You, a cold, BUT LOVINGLY ADORABLE, silicon killing machine, will help them... And bork.  An unusual choice, but it was made nonetheless.
      rules: ghost-role-information-silicon-rules
      raffle:
        settings: default
    - type: GhostTakeoverAvailable
    - type: SiliconLawProvider
      laws: SyndiBorgiLawset
      subverted: true
    - type: RandomMetadata
      nameSegments:
      - NamesSyndiBorgi
    - type: ContainerFill
      containers:
        borg_brain:
        - PositronicBrain
    - type: NpcFactionMember
      factions:
      - Syndicate
    - type: IntrinsicRadioTransmitter
      channels:
      - Syndicate
      - Binary
    - type: ActiveRadio
      channels:
      - Syndicate
    - type: Barotrauma
      maxDamage: 10
      damage:
        types:
          Blunt: 0.15
    - type: Temperature
      coldDamage:
        types:
          Cold: 0.01
    - type: ItemSlots
      slots:
        cell_slot:
          name: power-cell-slot-component-slot-name-default
          startingItem: PowerCellHyper
    - type: AccessReader
      access: [["SyndicateAgent"], ["NuclearOperative"]]